{"doc_id": "crm::dev_docs::2024-01-01::get-started-agentforce-agents-agentforce-developer::202f14da", "company": "Salesforce", "doctype": "dev_docs", "title": "Get Started | Agentforce Agents | Agentforce Developer Guide | Salesforce Developers", "publish_date": "", "url": "https://developer.salesforce.com/docs/einstein/genai/guide/agent-api-get-started.html", "final_url": "https://developer.salesforce.com/docs/einstein/genai/guide/agent-api-get-started.html", "source_domain": "salesforce.com", "section": "body", "topic": "Agentforce|Earnings|Product", "persona_tags": ["cio"], "language": "en", "text": "Get Started | Agentforce Agents | Agentforce Developer Guide | Salesforce Developers\n\n \n\nGet Started with the Agent API\n\nBring the power of generative AI to your business with Agentforce. Build intelligent, trusted, and customizable AI agents and empower your users to get more done with Salesforce. Use the Agent API to communicate with AI agents directly from a REST API. Start sessions, send messages to the AI agent, receive messages, and end sessions using the API.\n\nTo access the Agent API, you must set up a connected app that supports the client credential flow. These instructions show you how to get your environment set up for use with the API and demonstrate how to make your first call to the API.\n\nYou must have Agentforce enabled with at least one agent activated. See \nSet Up Agents\n in Salesforce Help.\n\nAgent API isn’t supported for agents of type “Agentforce (Default)”.\n\nThis video shows you how to set up your org to use the Agent API. It contains a simplified version of the steps below, along with guidance on using the \nPostman collection\n.\n\nGet Started with the Agent API\n\nTo use the Agent API, you must create a Connected App. We suggest you set up the app to support the client credentials flow, although you can use any flow that provides a \nJWT-based access token\n. Use the connected app to create a token. To learn more about connected apps, see \nCreate a Connected App\n in Salesforce Help along with these specific topics.\n\nConfigure a Connected App to Issue JWT-Based Access Tokens\n\nConfigure a Connected App for the Client Credentials Flow\n\nThese instructions are for a sample connected app implementation that supports Agent API communication.\n\nStarting with Summer ’25, you can no longer create connected apps from \nApp Manager\n in Setup. To create a connected app, go to \nSettings\n under \nExternal Client Apps\n in Setup. Agent API doesn't currently support external client apps (ECAs)—it only supports connected apps.\n\nOpen your org and go to Setup.\n\nFrom Setup, select \nSettings\n under \nApps > External Client Apps\n.\n\nTurn on \nAllow creation of connected apps\n.\n\nClick the \nNew Connected App\n button.\n\nFor \nConnected App Name\n, specify an app name.\n\nFor \nContact Email\n, specify your admin email address.\n\nIn the API section, check \nEnable OAuth Settings\n. This action displays additional OAuth-related settings.\n\nFor \nCallback URL\n, specify \nhttps://login.salesforce.com\n.\n\nFrom \nSelected OAuth Scopes\n, add these scopes to the connected app.\n\nAccess chatbot services (chatbot_api)\n\nAccess the Salesforce API Platform (sfap_api)\n\nManage user data via APIs (api)\n\nPerform requests at any time (refresh_token, offline_access)\n\nDeselect:\n\nRequire Proof Key for Code Exchange (PKCE) Extension for Support Authorization Flows\n\nRequire Secret for Web Server Flow\n\nRequire Secret for Refresh Token Flow\n\nSelect:\n\nEnable Client Credentials Flow\n\nIssue JSON Web Token (JWT)-based access tokens for named users\n\nReview this screenshot to verify that you selected the correct settings.\n\nFrom the bottom of the page, save the app, and then click \nContinue\n.\n\nAfter saving the app, you see the \nManage Connected Apps\n page. Click \nManage\n. (To view this same screen later, select \nManage Connected Apps\n from Setup.)\n\nClick \nEdit Policies\n.\n\nIn the OAuth Policies section, from the Permitted Users dropdown, select the appropriate permitted users. See \nManage OAuth Access Policies for a Connected App\n in Salesforce Help.\n\nIn the \nClient Credentials Flow\n section, set \nRun As\n to a user that has at least \nAPI Only access\n.\n\nFrom the \nJWT-Based Access Token Settings for Named Users\n section, keep \nIssue JSON Web Token (JWT)-based access tokens\n checked and leave the \nToken Timeout\n value at 30 minutes.\n\nSave the app.\n\nThis step is only applicable if you selected \"Admin approved users are pre-authorized\" from the OAuth Policies section above.\n Scroll down the page to the Profiles section, click \nManage Profiles\n, and select the profiles needed to access this connected app. See \nManage Other Access Settings for a Connected App\n in Salesforce Help.\n\nBefore calling the API, add your connected app to your agent.\n\nFrom Setup, select \nAgentforce Agents\n. Select your agent.\n\nSelect the \nConnections\n tab, and click \nAdd\n from the \nConnections\n section.\n\nAdd a new \nAPI\n connection, choose your connected app, and then save.\n\nTo create a token, you need the consumer key and consumer secret from your connected app.\n\nFrom Setup, select \nApp Manager\n.\n\nFind your connected app, click the dropdown arrow on the right, and then click \nView.\n\nClick \nManage Consumer Details\n.\n\nCopy \nConsumer Key\n and \nConsumer Secret\n.\n\nAll calls to the Agent API require a token. Create a token by using the consumer key, consumer secret, and your domain name.\n\nMY_DOMAIN_URL\n: You can get the domain from Setup. Search for \nMy Domain\n. Copy the value shown in the \nCurrent My Domain URL\n field.\n\nCONSUMER_KEY\n, \nCONSUMER_SECRET\n: You can get the consumer key and secret by following the instructions in \nObtain Credentials\n.\n\nThe previous command returns a JSON payload similar to this response.\n\nCopy the access token specified in the \naccess_token\n property. This token is required when making requests to the API.\n\nAfter you set up your connected app and created a token, you’re ready to call the API. Before making the call, gather this information.\n\nAGENT_ID\n: The ID of the agent that you want to interact with. You can find this ID in the URL of the Agent Overview Page. When you select the agent from Setup, use the 18-character ID at the end of the URL. For example, when viewing this URL, \nhttps://mydomain.test1.my.pc-rnd.salesforce-setup.com/lightning/setup/EinsteinCopilot/0XxSB000000IPCr0AO/edit\n, the agent ID is \n0XxSB000000IPCr0AO\n.\n\nACCESS_TOKEN\n: The token that you created in \nCreate a Token\n.\n\nRANDOM_UUID\n: A random UUID value that you provide to represent the session key. You can use this parameter to trace the conversation in your agent’s event logs.\n\nMY_DOMAIN_URL\n: From Setup, search for \nMy Domain\n. Copy the value shown in the \nCurrent My Domain URL\n field.\n\nBe sure to use your \nMy Domain\n URL (for example, \nsome_domain.my.salesforce.com\n) and not simply the domain name displayed in your browser (\nsome_domain.lightning.force.com\n).\n\nThis curl command creates a new agent session with the Agent API.\n\nThe \nbypassUser\n parameter indicates whether to use the agent-assigned user instead of the logged in user. If set to \ntrue\n, the API uses the user associated with the agent. If set to \nfalse\n, the API uses the user associated with the token. For this client credentials flow scenario, we set the value to \ntrue\n. However, you may need to change this value depending on your use case.\n\nWhen this call succeeds, you receive a response with a session ID and additional info.\n\nCongratulations, you’ve successfully started using the Agent API! To continue using the API, see \nAgent API Examples\n and the \nAgent API Postman Collection\n.\n\nAgent API Session Lifecycle\n\nAgent API Examples\n\nAgent API Postman Collection\n\nAgent API Considerations\n\nAgent API Troubleshooting\n\nAgent API Reference", "word_count": 1157, "token_count": 1547, "ingestion_ts": "2025-09-07T02:42:35.026946", "hash_sha256": "30196dd8efd55ce3f034ab2546a433be948649636b3ae11fcd6b27070c0c39df", "html_title": "", "meta_published_time": "", "last_modified_http": "", "full_domain": "developer.salesforce.com", "publish_date_provenance": "missing", "publish_date_confidence": 0.0, "was_fallback_today": false, "link_ok": true, "link_status": 200}